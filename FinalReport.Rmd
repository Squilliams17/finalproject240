---
title: "Final Report"
output: html_document
date: "`r Sys.Date()`"
author: Will Deley, Anish Mantri, Alexander Teran
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(warning = FALSE)
```



```{r, include=FALSE}
library(tidyverse)
library(dplyr)
library(readr)
library(ggplot2)
library(ggrepel)
library(plotly)
library(crosstalk)
library(htmltools)
library(car)
```



```{r, include=FALSE}
nba_24_25_playoff_shooting_data <- read_csv("./nba_24-25_playoff_shooting_by_zone.csv")
nba_24_25_playoff_shooting_data
num_teams <- length(unique(nba_24_25_playoff_shooting_data$Team))
num_teams
num_games <- 76
num_games

```


```{r, include=FALSE}
nba_24_25_playoff_team_data <- read_csv("./nba_24-25_playoff_team_statistics.csv")
nba_24_25_playoff_team_data
```


```{r, include=FALSE}
nba_24_25_playoff_shooting_data <- nba_24_25_playoff_shooting_data %>%
  mutate(across(
    c(`Restricted Area FGM`, `Restricted Area FGA`,
      `In The Paint (Non-RA) FGM`, `In The Paint (Non-RA) FGA`,
      `Mid-Range FGM`, `Mid-Range FGA`,
      `Corner 3 FGM`, `Corner 3 FGA`,
      `Above the Break 3. FGM`, `Above the Break 3. FGA`),
    ~ as.numeric(.)
  )) %>%
  mutate(
    `3 FGM` = `Corner 3 FGM` + `Above the Break 3. FGM`,
    `3 FGA` = `Corner 3 FGA` + `Above the Break 3. FGA`,
    `3 FG%` = ifelse(`3 FGA` == 0, 0, (`3 FGM` / `3 FGA`) * 100),
    `2 FGM` = `Restricted Area FGM` + `In The Paint (Non-RA) FGM` + `Mid-Range FGM`,
    `2 FGA` = `Restricted Area FGA` + `In The Paint (Non-RA) FGA` + `Mid-Range FGA`,
    `2 FG%` = ifelse(`2 FGA` == 0, 0, (`2 FGM` / `2 FGA`) * 100)
  )

nba_summary <- nba_24_25_playoff_shooting_data %>%
  group_by(Team) %>%
  summarise(
    total_3FGA = sum(`3 FGA`),
    total_3FGM = sum(`3 FGM`),
    total_2FGA = sum(`2 FGA`),
    total_2FGM = sum(`2 FGM`),
    `2FGA%` = total_2FGM / total_2FGA
  ) %>%
  full_join(
    nba_24_25_playoff_team_data %>% select(Team, `WIN%`),
    by = "Team"
  ) %>%
  mutate(`3_2_pointDifference` = total_2FGA - total_3FGA)




```

## Introduction
The NBA playoffs are defined by high-stakes matchups, rapidly shifting strategies, and the constant search for competitive advantages. As modern basketball increasingly emphasizes spacing and perimeter shooting, an important analytical question emerges: To what extent does three-point shooting influence playoff success compared to two-point efficiency? In this report, we analyze team-level and player-level data from the 2024–2025 NBA playoffs to investigate how shooting performance across different zones—such as corner threes, above-the-break threes, and shots in the paint—relates to win percentage and overall postseason success. We aim to determine whether three-point percentage is a stronger predictor of playoff performance than two-point percentage, and which specific shooting areas contribute most to winning. We theorize that three-point efficiency is a significantly stronger predictor of playoff success than two-point efficiency in modern day basketball and that specific high-value shooting zones—particularly corner and above-the-break threes—provide meaningful competitive advantages for teams in the 2024–2025 NBA playoffs.

## Background
The two data sets being analyzed are from the official NBA Statistics website, in which data has been meticulously collected over the past several decades. The data is exclusively limited to playoff data, to disregard any intentional loosing for future draft picks, or other reasons, that teams my do in the regular season. There are two data sets that are being analyzed in this report, individual player shooting data that will be referred to as shooting_data^[https://www.nba.com/stats/players/shooting?DistanceRange=By+Zone&Season=2024-25&SeasonType=Playoffs&PerMode=PerGame], and team performance data that will be referred to as team_data^[https://www.nba.com/stats/teams/traditional?PerMode=PerGame&SeasonType=Playoffs&Season=2024-25]
. Both data sets are kept to strictly the 2024-25 Playoff season. The data consists of 16 teams, 76 games, and a total of 96 players (top 6 players of each team). 


Below is a visualization of the column sections for the shoot_data data set.
```{r, echo=FALSE}
shooting_data_table <- tibble(columns = c("Player", "Restricred Area", "In the Paint (Non-RA)", "Mid-Range", "Left Corner 3", "Right Corner 3", "Corner 3", "Abover the Break 3", "2PT Field Goal", "3PT Field Goal"))
#print(shooting_data_table)
knitr::kable(shooting_data_table)
```


The shooting_data section looks at all players individual shooting statistics, averaged out per game in the playoffs. The first column name, Player, representes columns in the data set for the Player's description, include the player's name, team, and age. The other columns visualized above are locations of shots accross the court, with each section having three statistics FGM (Field Goals Made), FGA (Field Goals Attempted), and FG% (Field Goal %). 
 
 
- Restricted Area: Right under the basket, typically layups and dunks. Must be taken in the semi circle painted on the court under the basket.
- In the Paint (Non - RA): These are shots taken in the painted region of the basketball court, below the free throw line, not including Restricted Area shots. These can possibly be dunks or layups if a player jumps or reaches far enough.
- Mid-Range: These are shots taken inside of the three point line that do not fall under the previous two categories.
- Left-Corner 3: Shots taken beyond the 3 point line in the left corner of the court.
- Right-Corner 3:  Shots taken beyond the 3 point line in the right corner of the court.
- Corner 3: An aggregate of both Left and Right corner three point shots.
Above the Break 3: Shots taken beyond the 3 point line that do not consider corner shots, they are taken either directly in-line with the basket or at a partial angle.
- 2 and 3 PT Field Goals: Aggregated fields to get values for 2 and 3 point shooting per game in their entirety.

The team_data section looks at each team's performance in the playoffs, and maintains a team column with each Team's abbreviated name. The columns that are being used in this analysis are WIN%, which is the winning percentage of a team, directly correlating to their success in the playoffs. There are also ggregated fields to get values for 2 and 3 point shooting per game in their entirety for each team, structed the same as shooting_data classifies it per player.

The data being analyzed does leave out certain players from teams that did not play impact, or any minutes. This is to remove players with no shooting data, or just one or two missed shots at the end of an already decided game. There are some unusualities in the data, in which NBA 3 point shooting has risen greatly over the last decade, teams simply put up more 3's, which has been noted as the key strategy of the 2023-24 NBA Playoff Championship Boston Celtics. In addition, there may be a correlation between 2 and 3 point shooting, and certain team strategies may have affected this. Shai Gilgeous-Alexander, the finals MVP and star play for the Championship winning Oklahoma City Thunder is known for driving inside the paint and attempting to draw fouls, for free shots and free throws at a rate higher than many other players. This strategy, if a foul is called, allows the player to either shoot two free throws for 2 points, or (if they make the basket), it counts and they can shoot one additional free throw, gaining the same amount of points as a 3-point shot would have made. Strategies to raise the expected value on any given play such as this are changing yearly in the NBA, and thus 3-point shooting is on the rise. Other discrepancies note that "free shots", such as break away lay-ups and dunks (usually in the Restricted Area) are always two points, and with no defense are almost certain to go in the basket. These kinds of shots can swing momentum, and teams who accumulate them are essentially gaining free points throughout the game. As a result, data may show that this shot is influential in game outcome, while it is more of a defensive outcome from a player stealing a ball, rather than an offensive shot.

In the following of this report, we will delve into the specifics of this data set, analyzing how 3-point shooting affects a given team's chances to win in the 2024-25 NBA Playoffs. The analysis will inquire about the proportion of 3 vs 2 point shots, and how they affect a team's winning percentage. In addition we will look at specific 3-point shooting data, and determine where the most effective areas of the court are for teams winning this year. We will look at the analysis of this data to determine whether 3-point shooting is as decisive of a factor towards winning in the NBA playoffs as popular media makes it out to be.

# Analysis

```{r, include=FALSE}

team_zone_avgs <- nba_24_25_playoff_shooting_data %>%
  group_by(Team) %>%
  summarise(
    `Left Corner 3 FG%` = mean(as.numeric(`Left Corner 3. FG%`), na.rm = TRUE),
    `Right Corner 3 FG%` = mean(as.numeric(`Right Corner 3. FG%`), na.rm = TRUE),
    `Above the Break 3 FG%` = mean(`Above the Break 3. FG%`, na.rm = TRUE)
  ) %>%
  pivot_longer(
    cols = c(`Left Corner 3 FG%`, `Right Corner 3 FG%`, `Above the Break 3 FG%`),
    names_to = "Zone",
    values_to = "FG_Percent"
  )

```
This graph is aggregating player-level three-point shooting data into team-level averages for the 2024–2025 NBA playoffs. Because our goal is to analyze how three-point shooting affects team win percentage and playoff success, we need a single shooting percentage per team per zone, rather than having multiple rows per player.


```{r, echo=FALSE}
team_zone_avgs <- team_zone_avgs %>%
  left_join(nba_24_25_playoff_team_data %>% select(Team, `WIN%`), by = "Team")
# Scatter plot with size proportional to WIN%
ggplot(team_zone_avgs, aes(x = Zone, y = FG_Percent, color = Team, size = `WIN%`)) +
  geom_point() +
  geom_text_repel(aes(label = Team), vjust = -0.5, size = 3, show.legend = FALSE) +
  labs(
    title = "NBA 2024-2025 Playoff Teams: 3PT FG% by Zone with WIN%",
    x = "3-Point Zone",
    y = "FG%",
    size = "Win %"
  ) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
 
```

This graph creates a scatter plot visualizing 3PT shooting performance by zone for each playoff team, while also showing team success (win percentage) as the size of the points.((0.2%-Smallest sized point), (0.4% - Medium sized point) (0.6%-Large sized point))

```{r, include=FALSE}
# Make sure team averages and WIN% are joined
team_zone_avgs <- nba_24_25_playoff_shooting_data %>%
  group_by(Team) %>%
  summarise(
    Left_Corner_3_FG = mean(as.numeric(`Left Corner 3. FG%`), na.rm = TRUE),
    Right_Corner_3_FG = mean(as.numeric(`Right Corner 3. FG%`), na.rm = TRUE),
    Above_the_Break_3_FG = mean(`Above the Break 3. FG%`, na.rm = TRUE)
  ) %>%
  left_join(nba_24_25_playoff_team_data %>% select(Team, `WIN%`), by = "Team")

# Correlation tests for each zone
cor_left <- cor.test(team_zone_avgs$Left_Corner_3_FG, team_zone_avgs$`WIN%`)
cor_right <- cor.test(team_zone_avgs$Right_Corner_3_FG, team_zone_avgs$`WIN%`)
cor_above <- cor.test(team_zone_avgs$Above_the_Break_3_FG, team_zone_avgs$`WIN%`)
cor_left
cor_right
cor_above
```
Among the three-point zones, only above-the-break three-point shooting shows a statistically significant correlation with playoff win percentage (r ≈ 0.52, p ≈ 0.038), while corner threes, though positively correlated, are not statistically significant enough.



```{r, include=FALSE}
nba_win_perc <- nba_24_25_playoff_team_data %>%
  select(Team, `WIN%`)

nba_sum <- nba_24_25_playoff_shooting_data %>%
  group_by(Team) %>%
  full_join(nba_win_perc, by = "Team") %>%
  slice_max(order_by = `3 FGA` + `2 FGA`, n = 6, with_ties = TRUE) %>%
  ungroup()
```



```{r, echo=FALSE}
#put data into SharedData so that graph can be interactive
nba_shared_data <- SharedData$new(nba_sum, key = ~Team, group = "NBA_Data")


nba_3v2FGM_plot <- nba_shared_data %>%
  ggplot(aes(x = `2 FGM`, y = `3 FGM`)) +
  geom_point(size = 3, aes(color = `WIN%`, text = paste("Team:", Team, "\nWin %:",`WIN%`, "\nPlayer:", Player))) + 
  scale_color_gradientn(
    colors = c("blue", "dodgerblue","deepskyblue", "white", "orange", "red", "darkred")
  ) + 
  geom_vline(xintercept = mean(nba_sum$`2 FGM`), linetype = "dashed", alpha = 0.5) +
  geom_hline(yintercept = mean(nba_sum$`3 FGM`), linetype = "dashed", alpha = 0.5) +
  labs(
    y = "3-Point FG Made", x = "2-Point FG Made", title = "3 vs 2 Point Field Goals Made, By Player in 24-25 Playoffs"
    )

interactive <- ggplotly(nba_3v2FGM_plot, tooltip = c("text", "x", "y"))

team_filter <- filter_select(
  id = "team_select",
  label = "Select Team:",
  sharedData = nba_shared_data,
  group = ~Team,
  allLevels = TRUE
)

browsable(
  tagList(
    team_filter,
    interactive
  )
)
```




```{r, echo=FALSE}
nba_24_25_playoff_team_data %>%
  ggplot(aes(x = `FGM`-`3PM`, y = `3PM`)) +
  geom_point(size = 3, aes(color = `WIN%`)) + 
  scale_color_gradientn(
    colors = c("blue", "dodgerblue","deepskyblue", "white", "orange", "red", "darkred")
  ) + 
  geom_text_repel(aes(label = Team), vjust = -0.5, size = 3, show.legend = FALSE) +
  geom_vline(aes(xintercept = mean(`FGM`-`3PM`)), linetype = "dashed", alpha = 0.5) +
  geom_hline(aes(yintercept = mean(`3PM`)), linetype = "dashed", alpha = 0.5) +
  labs(
    y = "3-Point FG Made", x = "2-Point FG Made", title = "3 vs 2 Point Field Goals Made by Team in 24-25 Playoffs"
    )
```

After these graphs we can infer that 3 point shooting alone does not directly correlate to teams achieving a high winning percentage in the playoffs. The charts show teams are most efficient when shooting the most 2 and 3 point field goals, which makes sense as that directly means they are scoring more points throughout the game. There is definitely an appearance of teams doing well that average more 2s than the average. However, it appears there is little to no success for teams that shoot well below the average amount of 3's in a game, while there are teams, such as the Boston Celtics (2023-24 NBA Champions), who shoot a much lower average of 2 point field goals, while being able to maintain a high winning percentage.


```{r, include=FALSE}

#Looking at the correlation between 2 and 3 point shots
cor_2v3 <- cor.test(nba_sum$`2 FGM`, nba_sum$`3 FGM`)
cor_2vWin <- cor.test(nba_sum$`2 FGM`, nba_sum$`WIN%`)
cor_3vWin <- cor.test(nba_sum$`3 FGM`, nba_sum$`WIN%`)

#Looking at the correlation between 2 and 3 point shots
cor_2v3

#Looking at the correlation between 2 point shots and Winning
cor_2vWin
#Looking at the correlation between 3 point shots and Winning
cor_3vWin



cor_2vLoss <- cor.test(nba_sum$`2 FGM`, 1 - nba_sum$`WIN%`)
cor_3vLoss <- cor.test(nba_sum$`3 FGM`, 1 - nba_sum$`WIN%`)

#Looking at the correlation between 2 point shots and Losing
cor_2vLoss
#Looking at the correlation between 3 point shots and Losing
cor_3vLoss

```
As seen below, there is not a strong correlation received between the amount of 2 and 3 point shots in the NBA playoffs. What the correlation rather shows is that for the most part, teams tend to favor one type of shot, but must shoot both 2 and 3 pointers throughout each game, whether that be due to what their offensive schema is, or how the defense protects certain areas of the court. This can possibly affect the other correlations but for now we will continue to compute, as the p value is quite high. The correlation tests actually show that making more 2 point field goals has a higher correlation to winning percentage than 3 point field goals, but again this correlation test cannot be statistically significant, given the high p value. Further, making more 2 point shots has a smaller negative correlation on the loss % of teams as well, but with these same discrepancies. This data could have been slightly skewed by the winning Oklahoma City Thunder (OKC) who shot more two point shots than any other team, and teams such as the Los Angeles Lakers (LAL) and Miami Heat (MIA) who shot a large majority of their shots from the 3 point range in their short, losing playoff stints. However, since OKC won the Championship, and many other winning teams did not fall beyond the 2-point mean, converting large amounts of 2-point shots seem to have a greater relation to winning teams in the playoffs.



```{r, include=FALSE}

cor_3_2_pointDifference <- cor.test(nba_summary$`WIN%`, nba_summary$`3_2_pointDifference`)
cor_3_2_pointDifference

cor_2FGA_percent_vs_Win  <- cor.test(nba_summary$`WIN%`, nba_summary$`2FGA%`)
cor_2FGA_percent_vs_Win 

```
A correlation test suggests that the difference between 2-point and 3-point attempts is not statistically correlated with win percentage. Similarly, the correlation between a team’s 2-point field goal attempt percentage (2FGA%) and win percentage is also not stastically rlevant.



```{r, include=FALSE}


regression_data <- nba_summary %>%
  mutate(z_2p = scale(total_2FGM),
         z_3p = scale(total_3FGM)
         ) %>%
  select(Team, z_2p, z_3p, `WIN%`)
regression_data


lm_team <- lm(`WIN%` ~ z_2p + z_3p, data = regression_data)



x<-linearHypothesis(lm_team, "z_2p = z_3p")
p_value <- x$`Pr(>F)`[2]

```



```{r latex_eq, echo=FALSE, results='asis'}
coef_table <- summary(lm_team)$coefficients %>%
  as.data.frame()

coef_table$Term <- rownames(coef_table)
coef_table$Term[coef_table$Term == "(Intercept)"] <- "Intercept"
coef_table$Term[coef_table$Term == "z_2p"] <- "2FGM (z-score)"
coef_table$Term[coef_table$Term == "z_3p"] <- "3FGM (z-score)"

coef_table <- coef_table[coef_table$Term %in% c("Intercept", "2FGM (z-score)", "3FGM (z-score)"), ]
rownames(coef_table) <- coef_table$Term

beta0 <- coef_table["Intercept", "Estimate"]
beta1 <- coef_table["2FGM (z-score)", "Estimate"]
beta2 <- coef_table["3FGM (z-score)", "Estimate"]

latex_eq <- paste0(
  "\\hat{Win\\%} = ",
  round(beta0, 3),
  ifelse(beta1 >= 0, " + ", " - "), abs(round(beta1, 3)), " \\cdot \\text{2FGM (z-score)}",
  ifelse(beta2 >= 0, " + ", " - "), abs(round(beta2, 3)), " \\cdot \\text{3FGM (z-score)}",
  " + \\varepsilon"
)

cat(paste0("$$", latex_eq, "$$"))
```


After performing a regression analysis with win percentage as the response and 2FGM (z-score) and 3FGM (z-score) as predictors, we conducted a linear hypothesis test to compare the coefficients of 2FGM and 3FGM. The null hypothesis ($H_0: \beta_1 = \beta_2$) stated that the effects of 2FGM and 3FGM on win percentage are equal, while the alternative hypothesis ($H_a: \beta_1 \neq \beta_2$) stated that the effects are different. The resulting p-value was 0.238. Since this value is greater than the common significance level of 0.05, we fail to reject the null hypothesis. This indicates that there is not sufficient evidence to conclude that 2FGM and 3FGM have significantly different effects on win percentage, suggesting that their contributions to wins may be statistically similar.

## Discussion
The correlations are as follows:


```{r, echo=FALSE}
correlation_table <- tibble(
  obseration_x = c("Above-the-break 3-point FG%","Left-corner 3 FG%","Right-corner 3 FG%","2-point FG made","3-point FG made","2-point FG made","2-point FG made","3-point FG made","2-pt minus 3-pt FGA","2-point FG%"),
  observation_y = c("WIN%","WIN%","WIN%","WIN%","WIN%","3-point FG made","LOSS%","LOSS%","WIN%","WIN%"),
  r = c(0.52, 0.47, 0.44, 0.048, 0.006, -0.124, -0.048, -0.006, 0.28, 0.28),
  p = c(0.038, 0.067, 0.088, 0.65, 0.95, 0.23, 0.65, 0.95, 0.34, 0.31)
)
knitr::kable(correlation_table)
```


These results indicate that above-the-break three-point shooting efficiency is the only measure among those tested that shows a statistically significant correlation with playoff win percentage. The other shooting zones and raw field goal volumes (2-point or 3-point) are not statistically relevant for predicting playoff success. Additionally, the non-statistically significant correlation between 2-point and 3-point FGM with win percentage suggests that while teams may favor one type of shot over another, this preference alone does not strongly predict playoff outcomes. This conclusion is supported by a regression-based hypothesis test, which found no statistically significant difference between the effects of 2FGM and 3FGM on win percentage. Overall, these findings indicate that only above-the-break three-point shooting demonstrates a statistically significant relationship with playoff success, while all other measures—including 2-point makes and 3-point makes or attempts—do not.
For future research, analyzing a full regular-season dataset could reveal whether this trend holds outside the playoffs or if other patterns emerge. Investigating factors such as shot timing—like clutch three-pointers versus routine two-point attempts—may provide deeper insights into how specific shooting performance affects playoff win probability.

## Reference
1. NBA Player Average Shooting Data by Zone, 2024-25 Playoffs. 
2. NBA Team Average Data, 2024-25 Playoffs.